<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v1.4 docs-doc-page docs-doc-id-user-manuals/network/raven" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Raven | OpenYurt</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openyurt.io/docs/user-manuals/network/raven"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.4"><meta data-rh="true" name="docsearch:version" content="v1.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.4"><meta data-rh="true" property="og:title" content="Raven | OpenYurt"><meta data-rh="true" name="description" content="This document introduces how to install raven and use raven to enhance edge-edge and edge-cloud network communication in an edge cluster."><meta data-rh="true" property="og:description" content="This document introduces how to install raven and use raven to enhance edge-edge and edge-cloud network communication in an edge cluster."><link data-rh="true" rel="icon" href="/img/openyurt.ico"><link data-rh="true" rel="canonical" href="https://openyurt.io/docs/user-manuals/network/raven"><link data-rh="true" rel="alternate" href="https://openyurt.io/docs/user-manuals/network/raven" hreflang="en"><link data-rh="true" rel="alternate" href="https://openyurt.io/zh/docs/user-manuals/network/raven" hreflang="zh"><link data-rh="true" rel="alternate" href="https://openyurt.io/docs/user-manuals/network/raven" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://&lt;NEW_APP_ID&gt;-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Raven","item":"https://openyurt.io/docs/user-manuals/network/raven"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenYurt RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenYurt Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="OpenYurt" href="/opensearch.xml">


<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="icon" type="image/svg+xml" href="/favicons/favicon.svg">
<link rel="icon" type="image/png" href="/favicons/favicon.png">
<link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" color="#ffffff" href="/favicons/safari-pinned-tab.svg">
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-config" content="/favicons/browserconfig.xml"><link rel="stylesheet" href="/assets/css/styles.6199bf72.css">
<script src="/assets/js/runtime~main.91ade588.js" defer="defer"></script>
<script src="/assets/js/main.80052023.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/openyurt.ico"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like OpenYurt, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openyurtio/openyurt">GitHub</a>! ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openyurt.ico" alt="OpenYurt" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openyurt.ico" alt="OpenYurt" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenYurt</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/team">Team</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/user-manuals/network/raven">v1.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/user-manuals/network/raven">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/user-manuals/network/raven">v1.4</a></li><li><a class="dropdown__link" href="/docs/v1.3/user-manuals/network/raven">v1.3</a></li><li><a class="dropdown__link" href="/docs/v1.2/user-manuals/network/raven">v1.2</a></li><li><a class="dropdown__link" href="/docs/v1.1/user-manuals/network/raven">v1.1</a></li><li><a class="dropdown__link" href="/docs/v1.0/user-manuals/network/raven">v1.0</a></li><li><a class="dropdown__link" href="/docs/v0.7.0/user-manuals/network/raven">v0.7.0</a></li><li><a class="dropdown__link" href="/docs/v0.6.0/">v0.6.0</a></li><li><a class="dropdown__link" href="/docs/v0.5.0/">v0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/user-manuals/network/raven" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/user-manuals/network/raven" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/openyurtio/openyurt" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/usage-conditions/resource-and-system-requirements"><span title="Usage Conditions" class="categoryLinkLabel_W154">Usage Conditions</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/installation/summary"><span title="Installation" class="categoryLinkLabel_W154">Installation</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/core-concepts/architecture"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/architecture"><span title="Architecture" class="linkLabel_WmDU">Architecture</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/core-concepts/yurt-manager"><span title="Components" class="categoryLinkLabel_W154">Components</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user-manuals/autonomy/selfhealing-during-network-disconnection"><span title="User Manuals" class="categoryLinkLabel_W154">User Manuals</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/autonomy/selfhealing-during-network-disconnection"><span title="Autonomy" class="categoryLinkLabel_W154">Autonomy</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/user-manuals/network/raven"><span title="Network" class="categoryLinkLabel_W154">Network</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user-manuals/network/raven"><span title="Raven" class="linkLabel_WmDU">Raven</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-manuals/network/bandwidth-reduction"><span title="bandwidth-reduction" class="linkLabel_WmDU">bandwidth-reduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-manuals/network/edge-pod-network"><span title="Edge Pod Network" class="linkLabel_WmDU">Edge Pod Network</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-manuals/network/service-topology"><span title="Service Topology" class="linkLabel_WmDU">Service Topology</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-manuals/network/nodeport-isolation"><span title="nodeport-isolation" class="linkLabel_WmDU">nodeport-isolation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/resource-access-control/"><span title="Resource Access Control" class="categoryLinkLabel_W154">Resource Access Control</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/storage/edge-local-storage"><span title="Storage" class="categoryLinkLabel_W154">Storage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/workload/daemon-pod-updater"><span title="Workload" class="categoryLinkLabel_W154">Workload</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/monitoring/prometheus"><span title="Monitoring" class="categoryLinkLabel_W154">Monitoring</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user-manuals/iot/edgex-foundry"><span title="IOT" class="categoryLinkLabel_W154">IOT</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/test-report/yurthub-performance-test"><span title="Test Report" class="categoryLinkLabel_W154">Test Report</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/best-practices/practices-1"><span title="Best Practices" class="categoryLinkLabel_W154">Best Practices</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/practices-1"><span title="Cloud-Edge-Device DevOps Collaboration" class="linkLabel_WmDU">Cloud-Edge-Device DevOps Collaboration</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/developer-manuals/how-to-build-and-test"><span title="Developer Manuals" class="categoryLinkLabel_W154">Developer Manuals</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/reference/api_reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/integrations/"><span title="Integrations" class="categoryLinkLabel_W154">Integrations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/faq/yurthub"><span title="FAQ" class="categoryLinkLabel_W154">FAQ</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">User Manuals</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Network</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Raven</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Raven</h1></header><p>This document introduces how to install raven and use raven to enhance edge-edge and edge-cloud network communication in an edge cluster.</p>
<p>Suppose you have an edge kubernetes cluster with nodes in different physical regions, and already deploy the <code>Raven Controller Manager</code> and <code>Raven Agent</code> in this cluster,You can refer to the  <a href="/docs/installation/manually-setup">installation tutorial</a> if you do not have Raven installed, the details of <code>Raven Controller Manager</code> are in <a href="https://github.com/openyurtio/raven-controller-manager/blob/main/README.md" target="_blank" rel="noopener noreferrer">here</a>.
<img decoding="async" loading="lazy" alt="raven_deploy" src="/assets/images/raven_deploy-927ae3b6df8f739cdf6bc2909f20f17d.png" width="720" height="405" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="label-nodes-in-different-physical-regions">Label nodes in different physical regions<a href="#label-nodes-in-different-physical-regions" class="hash-link" aria-label="Direct link to Label nodes in different physical regions" title="Direct link to Label nodes in different physical regions" translate="no">​</a></h2>
<p>As follows, suppose the cluster has five nodes, located in three different regions, where the node <code>master</code> is cloud node.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get nodes -o wide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                      STATUS   ROLES                  AGE     VERSION    INTERNAL-IP     EXTERNAL-IP   OS-IMAGE                KERNEL-VERSION                CONTAINER-RUNTIME</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izbp15inok0kbfkg3in52rz   Ready    Edge-HZ-1              27h     v1.22.11   172.16.2.103    &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.81.1.el7.x86_64   docker://19.3.15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izbp15inok0kbfkg3in52sz   Ready    Edge-HZ-2              26h     v1.22.11   172.16.2.104    &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.81.1.el7.x86_64   docker://19.3.15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izm5eb24dmjfimuaybpnqzz   Ready    Edge-QD-1              29h     v1.22.11   172.16.1.89     &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.80.1.el7.x86_64   docker://19.3.15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izm5eb24dmjfimuaybpnr0z   Ready    Edge-QD-2              29h     v1.22.11   172.16.1.90     &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.80.1.el7.x86_64   docker://19.3.15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izwz9dohcv74iegqecp4axz   Ready    control-plane,master   5d21h   v1.22.11   192.168.0.195   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.80.1.el7.x86_64   docker://20.10.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">izwz9ey0js5z7mornclpd6z   Ready    cloud                  3h3m    v1.22.11   192.168.0.196   &lt;none&gt;        CentOS Linux 7 (Core)   3.10.0-1160.80.1.el7.x86_64   docker://20.10.2</span><br></span></code></pre></div></div>
<p>We use a <a href="https://github.com/openyurtio/raven-controller-manager/blob/main/pkg/ravencontroller/apis/raven/v1alpha1/gateway_types.go" target="_blank" rel="noopener noreferrer">Gateway</a> CR to manage nodes in different physical regions, and label nodes to indicate which <code>Gateway</code> these nodes are managed by.</p>
<p>For example, We label nodes in region <code>hangzhou</code> with value <code>gw-hangzhou</code>, indicating that these nodes are managed by the <code>gw-hangzhou</code> gateway.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl label nodes izbp15inok0kbfkg3in52rz izbp15inok0kbfkg3in52sz raven.openyurt.io/gateway=gw-hangzhou</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izbp15inok0kbfkg3in52rz not labeled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izbp15inok0kbfkg3in52sz not labeled</span><br></span></code></pre></div></div>
<p>Similarly, we label node in <code>cloud</code> with value <code>gw-cloud</code>, and nodes in region <code>qingdao</code> with value <code>gw-qingdao</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl label nodes izwz9dohcv74iegqecp4axz izwz9ey0js5z7mornclpd6z raven.openyurt.io/gateway=gw-cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izwz9dohcv74iegqecp4axz labeled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izwz9ey0js5z7mornclpd6z labeled</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl label nodes izm5eb24dmjfimuaybpnqzz izm5eb24dmjfimuaybpnr0z raven.openyurt.io/gateway=gw-qingdao</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izm5eb24dmjfimuaybpnqzz  labeled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node/izm5eb24dmjfimuaybpnr0z  labeled</span><br></span></code></pre></div></div>
<p>Apply the following command to check that raven is running properly</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get pod -n kube-system | grep raven-agent-ds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-4b587                              1/1     Running             0              25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-dmh66                              1/1     Running             0              25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-gb5qj                              1/1     Running             0              25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-gzpfh                              1/1     Running             0              170m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-ksxq6                              1/1     Running             0              25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raven-agent-ds-qhjtb                              1/1     Running             0              25h</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-how-to-use">2. How to use<a href="#2-how-to-use" class="hash-link" aria-label="Direct link to 2. How to use" title="Direct link to 2. How to use" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-gateways">2.1 Gateways<a href="#21-gateways" class="hash-link" aria-label="Direct link to 2.1 Gateways" title="Direct link to 2.1 Gateways" translate="no">​</a></h3>
<ul>
<li>Create Gateway CR</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: raven.openyurt.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Gateway</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gw-hangzhou</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxyConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tunnelConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: raven.openyurt.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Gateway</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gw-cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  exposeType: PublicIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxyConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxyHTTPPort: 10255,9445</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxyHTTPSPort: 10250,9100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tunnelConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: raven.openyurt.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Gateway</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gw-qingdao</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxyConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tunnelConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izm5eb24dmjfimuaybpnqzz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izm5eb24dmjfimuaybpnr0z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<ul>
<li>Parameters Introduction：</li>
</ul>
<ol>
<li><code>spec.exposedType</code>: The type of public network exposure, empty indicates that the gateway will not be exposed, either LoadBalancer or PublicIP can be used to exposed gateway in internet.</li>
<li><code>spec.endpoints</code>: Indicates a set of alternative gateway endpoints, some of which are selected by the yurtmanager as gateway endpoints based on node status</li>
<li><code>spec.endpoints.nodeName</code>: The name of gateway endpoints<!-- -->
<ol>
<li><code>spec.endpoints.type</code>: The type of gateway endpoints, the value is set to proxy if the node is proxy mode endpoints, and the value is also can be set to tunnel if the node is tunnel mode endpoints.</li>
</ol>
</li>
<li><code>spec.endpoints.port</code>: Ports exposed by the gateway endpoints service: TCP 10262 in proxy mode and UDP 4500 in tunnel mode</li>
<li><code>spec.endpoints.publicIP</code>: The public ip of gateway endpoints</li>
<li><code>spec.endpoints.underNAT</code>: Whether to use NAT to access the public network. Generally, false is set on the cloud, and true is set on the edge</li>
<li><code>spec.proxyConfig.Replicas</code>: Replicas of gateway endpoints in enable proxy mode</li>
<li><code>spec.proxyConfig.proxyHTTPPort</code>: A insecure port for a cloud-side proxy mode communication agent, such as port 10255, which kubelet listens for</li>
<li><code>spec.proxyConfig.proxyHTTPPort</code>: A secure port for a cloud-side proxy mode communication agent, such as port 10250, which kubelet listens for</li>
<li><code>spec.tunnelConfig.Replicas</code>: Replicas of gateway endpoints in enable tunnel mode，which must be 1 currently</li>
</ol>
<ul>
<li>Describe the status of all gateways</li>
</ul>
<ol>
<li>Check whether the Gateway node is elected in the Status of the gateway. The Yurt Manager component, GatewayPickup Controller, is responsible for the election.</li>
<li>Check whether the public IP address and exposed port are correct</li>
<li>Check whether the enabled mode meets the expectations</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get cm raven-cfg -n kube-system -o yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  enable-l3-tunnel: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  enable-l7-proxy: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    meta.helm.sh/release-name: raven-agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    meta.helm.sh/release-namespace: kube-system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  creationTimestamp: &quot;2023-11-24T06:44:54Z&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app.kubernetes.io/managed-by: Helm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: raven-cfg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: kube-system</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get gateways</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME          AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gw-cloud      22h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gw-hangzhou   22h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gw-qingdao    22h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get gateway gw-cloud -o yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: raven.openyurt.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Gateway</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gw-cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  exposeType: PublicIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxyConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxyHTTPPort: 10255,9445</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxyHTTPSPort: 10250,9100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tunnelConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  activeEndpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - config:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      enable-l7-proxy: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    publicIP: 47.xxx.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - config:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      enable-l3-tunnel: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    publicIP: 47.xxx.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  nodes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izwz9dohcv74iegqecp4axz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privateIP: 192.168.0.195</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 10.224.0.128/26</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izwz9ey0js5z7mornclpd6z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privateIP: 192.168.0.196</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 10.224.0.0/26</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get gateway gw-hangzhou -o yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: raven.openyurt.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Gateway</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: gw-hangzhou</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxyConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tunnelConfig:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Replicas: 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      underNAT: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  activeEndpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - config:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      enable-l7-proxy: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 10262</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - config:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      enable-l3-tunnel: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 4500</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    publicIP: 120.79.xxx.xxx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: tunnel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  nodes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izbp15inok0kbfkg3in52rz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privateIP: 172.16.2.103</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 10.224.1.128/26</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - nodeName: izbp15inok0kbfkg3in52sz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privateIP: 172.16.2.104</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - 10.224.1.0/26</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-pod-to-pod-networking-tunnel-mode">Test pod-to-pod networking (tunnel mode)<a href="#test-pod-to-pod-networking-tunnel-mode" class="hash-link" aria-label="Direct link to Test pod-to-pod networking (tunnel mode)" title="Direct link to Test pod-to-pod networking (tunnel mode)" translate="no">​</a></h3>
<ul>
<li>Create test pod</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: busy-box</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  replicas: 4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      app: busy-box</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        app: busy-box</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - name: busy-box</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        image: busybox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        command:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - /bin/sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - -c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - sleep 3000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      nodeSelector:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        openyurt.io/is-edge-worker: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<ul>
<li>Get test pod</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get pod -o wide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">busy-box-6f46f8585b-48zb9   1/1     Running   0          76s   10.244.19.3     izbp15inok0kbfkg3in52sz   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">busy-box-6f46f8585b-9nm64   1/1     Running   0          76s   10.244.16.161   izm5eb24dmjfimuaybpnqzz   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">busy-box-6f46f8585b-kv4dw   1/1     Running   0          76s   10.244.17.19    izm5eb24dmjfimuaybpnr0z   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">busy-box-6f46f8585b-t5v9d   1/1     Running   0          76s   10.244.18.4     izbp15inok0kbfkg3in52rz   &lt;none&gt;           &lt;none&gt;</span><br></span></code></pre></div></div>
<ul>
<li>Test networking across edge</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl exec -it busy-box-6f46f8585b-48zb9 -- sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ # ping 10.244.17.19 -c 4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PING 10.244.17.19 (10.244.17.19): 56 data bytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 10.244.17.19: seq=0 ttl=59 time=78.048 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 10.244.17.19: seq=1 ttl=59 time=77.424 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 10.244.17.19: seq=2 ttl=59 time=77.490 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 10.244.17.19: seq=3 ttl=59 time=77.472 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--- 10.244.17.19 ping statistics ---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4 packets transmitted, 4 packets received, 0% packet loss</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">round-trip min/avg/max = 77.424/77.608/78.048 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ul>
<li>Log in to the non-gateway node Edge-HZ-2 and ping the non-gateway node Edge-QD-2 to test the connectivity of nodes across network domains,</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Edge-HZ-2(Non-Gateway)：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ping 172.16.1.90 -c 4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PING 172.16.1.90 (172.16.1.90) 56(84) bytes of data.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 172.16.1.90: icmp_seq=1 ttl=61 time=77.5 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 172.16.1.90: icmp_seq=2 ttl=61 time=77.3 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 172.16.1.90: icmp_seq=3 ttl=61 time=78.5 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">64 bytes from 172.16.1.90: icmp_seq=4 ttl=61 time=77.3 ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--- 172.16.1.90 ping statistics ---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4 packets transmitted, 4 received, 0% packet loss, time 3003ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rtt min/avg/max/mdev = 77.314/77.682/78.531/0.533 ms</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Capture package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Edge-HZ-1 (Gateway)：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump -i raven0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">listening on raven0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:12.132496 IP 172.16.2.104 &gt; 172.16.1.90: ICMP echo request, id 2, seq 1, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:13.133606 IP 172.16.2.104 &gt; 172.16.1.90: ICMP echo request, id 2, seq 2, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:14.134172 IP 172.16.2.104 &gt; 172.16.1.90: ICMP echo request, id 2, seq 3, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:15.135570 IP 172.16.2.104 &gt; 172.16.1.90: ICMP echo request, id 2, seq 4, length 64</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Capture package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Edge-QD-1 (Gateway)：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump -i raven0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">listening on raven0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:12.174023 IP 172.16.1.90 &gt; 172.16.2.104: ICMP echo reply, id 2, seq 1, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:13.175096 IP 172.16.1.90 &gt; 172.16.2.104: ICMP echo reply, id 2, seq 2, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:14.176813 IP 172.16.1.90 &gt; 172.16.2.104: ICMP echo reply, id 2, seq 3, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:15.177024 IP 172.16.1.90 &gt; 172.16.2.104: ICMP echo reply, id 2, seq 4, length 64</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Capture package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Edge-QD-2(Non-Gateway)：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump -i raven0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">listening on raven0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:12.173087 IP iZm5eb24dmjfimuaybpnr0Z &gt; 172.16.2.104: ICMP echo reply, id 2, seq 1, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:13.174148 IP iZm5eb24dmjfimuaybpnr0Z &gt; 172.16.2.104: ICMP echo reply, id 2, seq 2, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:14.175884 IP iZm5eb24dmjfimuaybpnr0Z &gt; 172.16.2.104: ICMP echo reply, id 2, seq 3, length 64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:13:15.176090 IP iZm5eb24dmjfimuaybpnr0Z &gt; 172.16.2.104: ICMP echo reply, id 2, seq 4, length 64</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-cross-domain-http-networking-proxy-mode">Test cross-domain http networking (proxy mode)<a href="#test-cross-domain-http-networking-proxy-mode" class="hash-link" aria-label="Direct link to Test cross-domain http networking (proxy mode)" title="Direct link to Test cross-domain http networking (proxy mode)" translate="no">​</a></h3>
<p>In the edge scenario, the Intranet IP addresses of the edge devices often conflict with each other in closed Intranet environments, and the tunnel mode cannot support host communication in IP conflict scenarios. Therefore, the proxy mode must be enabled to support cross-domain HTTP/HTTPS requests.
enable proxy model, and set  <code>enable-l7-proxy: &quot;true&quot;</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get cm raven-cfg -n kube-system -o yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  enable-l3-tunnel: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  enable-l7-proxy: &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    meta.helm.sh/release-name: raven-agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    meta.helm.sh/release-namespace: kube-system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  creationTimestamp: &quot;2023-11-24T06:44:54Z&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app.kubernetes.io/managed-by: Helm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: raven-cfg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: kube-system</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl exec -it busy-box-6f46f8585b-48zb9 -- sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo hello word</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hello word</span><br></span></code></pre></div></div>
<h1>Other Features：</h1>
<p>By default, raven uses IPSec as the VPN back end, and we also provide WireGuard as an alternative. You can do the following to switch to the WireGuard back end.</p>
<ul>
<li>Raven requires the WireGuard kernel module to be loaded on the gateway node in the cluster. As of Linux 5.6, the kernel includes WireGuard in-tree; Linux distributions with older kernels will need WireGuard installed. For most Linux distributions, this can be done using the system package manager. For more information, see Installing WireGuard.<!-- -->
<ul>
<li>The gateway node will require an open UDP port to communicate. By default, the WireGuard uses UDP port 51820. Run the following command.<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd raven</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git checkout v0.4.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VPN_DRIVER=wireguard make deploy</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
</ul>
<h1>Using VPN Tunnel</h1>
<p>If using an IPSec tunnel (implemented via libreswan) as the backend, you can enter the raven agent container and check the relevant status by using the command <code>ipsec status/look</code> or <code>/usr/libexec/ipsec status/look</code>. Additionally, make appropriate use of the ipsec tool to troubleshoot related issues.
If using a Wireguard tunnel as the backend implementation for the VPN, you can enter the raven agent container, install the wireguard-tools tool, and refer to the tool&#x27;s instructions to troubleshoot related issues.
Raven relies entirely on open-source IPSec and Wireguard tools without any customization. You can refer to open-source communities and related technical blogs to resolve everyday issues.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openyurtio/openyurt.io/edit/master/docs/user-manuals/network/raven.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-04T20:38:56.000Z" itemprop="dateModified">Oct 4, 2025</time></b> by <b>Ihor Sychevskyi</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user-manuals/autonomy/node-pod-binding"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">pod node binding</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user-manuals/network/bandwidth-reduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">bandwidth-reduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#label-nodes-in-different-physical-regions" class="table-of-contents__link toc-highlight">Label nodes in different physical regions</a></li><li><a href="#2-how-to-use" class="table-of-contents__link toc-highlight">2. How to use</a><ul><li><a href="#21-gateways" class="table-of-contents__link toc-highlight">2.1 Gateways</a></li><li><a href="#test-pod-to-pod-networking-tunnel-mode" class="table-of-contents__link toc-highlight">Test pod-to-pod networking (tunnel mode)</a></li><li><a href="#test-cross-domain-http-networking-proxy-mode" class="table-of-contents__link toc-highlight">Test cross-domain http networking (proxy mode)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/installation/summary">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/openyurt/shared_invite/zt-2ajsy47br-jl~zjumRsCAE~BlPRRsIvg" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #openyurt channel )<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user-manuals/network/">DingTalk (31993519)</a></li><li class="footer__item"><a href="https://shimo.im/docs/rGK3cXYWYkPrvWp8" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openyurtio/openyurt" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/openyurtio/community/blob/main/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Membership<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Copyright © 2025 The OpenYurt Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
</body>
</html>