<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenYurt RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenYurt Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="OpenYurt" href="/opensearch.xml">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" color="#ffffff" href="/favicons/safari-pinned-tab.svg">
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-config" content="/favicons/browserconfig.xml"><title data-react-helmet="true">Seamless conversion between Kubernetes and OpenYurt | OpenYurt</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://openyurt.io/blog/How-to-use-yurtctl-convert-revert"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Seamless conversion between Kubernetes and OpenYurt | OpenYurt"><meta data-react-helmet="true" name="description" content="æ‰“å¼€openYurtçš„README.mdï¼Œåœ¨ç®€å•ä»‹ç»ä¹‹åå°±æ˜¯Getting started:"><meta data-react-helmet="true" property="og:description" content="æ‰“å¼€openYurtçš„README.mdï¼Œåœ¨ç®€å•ä»‹ç»ä¹‹åå°±æ˜¯Getting started:"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-12-03T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/adamzhoul"><meta data-react-helmet="true" property="article:tag" content="openyurt"><link data-react-helmet="true" rel="shortcut icon" href="/img/openyurt.ico"><link data-react-helmet="true" rel="canonical" href="https://openyurt.io/blog/How-to-use-yurtctl-convert-revert"><link data-react-helmet="true" rel="alternate" href="https://openyurt.io/blog/How-to-use-yurtctl-convert-revert" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openyurt.io/zh/blog/How-to-use-yurtctl-convert-revert" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://openyurt.io/blog/How-to-use-yurtctl-convert-revert" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8a5667f5.css">
<link rel="preload" href="/assets/js/runtime~main.6e7eb5b3.js" as="script">
<link rel="preload" href="/assets/js/main.a8318200.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">â­ï¸ If you like OpenYurt, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openyurtio/openyurt">GitHub</a>! â­ï¸</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openyurt.ico" alt="OpenYurt" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/openyurt.ico" alt="OpenYurt" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">OpenYurt</b></a><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="http://47.243.253.79/login" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Experience-Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/">v0.7.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Next</a></li><li><a class="dropdown__link" href="/docs/">v0.7.0</a></li><li><a class="dropdown__link" href="/docs/v0.6.0/">v0.6.0</a></li><li><a class="dropdown__link" href="/docs/v0.5.0/">v0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/blog/How-to-use-yurtctl-convert-revert" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/blog/How-to-use-yurtctl-convert-revert" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/openyurtio/openyurt" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">All posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/blog/How-to-use-yurtctl-convert-revert">Seamless conversion between Kubernetes and OpenYurt</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/How-to-use-service-topology">Use service topology to realize topology-aware traffic routing</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/How-run-business-pod-in-edge-scenarios">How Openyurt runs the business pod in edge scenarios</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Edge-gateway-caching-capabilities">Elegant realization of edge gateway caching capabilities</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Play-with-OpenYurt-on-Raspberry-Pi">Getting Started with OpenYurt:play with OpenYurt on Raspberry Pi</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Build-side-efficient-collaborative-network">How to build Kubernetes Native Cloud side efficient collaborative network</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Expansion-capability-of-Yurthub">Viewing Expansion Ability of YurtHub from Edge Autonomy</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/YurtHub-design-detail">YurtHub Design Detail:edge autonomy of OpenYurt</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Use-of-yurtctl">Yurtctl:make the native k8s cluster achieve edge computing capabilities</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/Introduce-of-OpenYurt">OpenYurt:edge computing cloud native project</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Seamless conversion between Kubernetes and OpenYurt</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-12-03T00:00:00.000Z" itemprop="datePublished">December 3, 2021</time> Â· <!-- -->9 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/adamzhoul" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/adamzhoul.png" alt="adamzhoul"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/adamzhoul" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">adamzhoul</span></a></div><small class="avatar__subtitle" itemprop="description">Member of OpenYurt</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>æ‰“å¼€openYurtçš„README.mdï¼Œåœ¨ç®€å•ä»‹ç»ä¹‹åå°±æ˜¯Getting started:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> yurtctl convert --provider [minikube|kubeadm|kind] // To convert an existing Kubernetes cluster to an OpenYurt cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> yurtctl revert // To uninstall and revert back to the original cluster settings</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç®€å•ä¸€è¡Œå‘½ä»¤å°±å¯ä½“éªŒOpenYurtäº†ï¼Œæ„Ÿè§‰éå¸¸æ–¹ä¾¿ã€‚</p><p>ç¨ç­‰ï¼ä¸ºä»€ä¹ˆæ˜¯ convert/revert è€Œä¸æ˜¯ install/uninstall ?</p><p>è¿™ä¸ªå‘½ä»¤å¯¹é›†ç¾¤åšäº†ä»€ä¹ˆï¼Ÿ</p><p>çœ‹æ¥ï¼Œåœ¨æ‰§è¡Œå®ƒä¹‹å‰æœ‰å¿…è¦ææ¸…æ¥šå®ƒåˆ°åº•åšäº†ä»€ä¹ˆã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="yurtctl-convert-åˆ°åº•åšäº†äº›ä»€ä¹ˆ">yurtctl convert åˆ°åº•åšäº†äº›ä»€ä¹ˆï¼Ÿ<a aria-hidden="true" class="hash-link" href="#yurtctl-convert-åˆ°åº•åšäº†äº›ä»€ä¹ˆ" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ ¸å¿ƒæµç¨‹">æ ¸å¿ƒæµç¨‹<a aria-hidden="true" class="hash-link" href="#æ ¸å¿ƒæµç¨‹" title="Direct link to heading">â€‹</a></h3><p>è·ŸéšopenYurt<a href="https://github.com/openyurtio/openyurt/blob/5063752a9f6645270e3177e39a46df8c23145af2/pkg/yurtctl/cmd/convert/convert.go#L300" target="_blank" rel="noopener noreferrer">æºä»£ç </a>ï¼Œæ¢³ç†äº†convertçš„æ ¸å¿ƒæµç¨‹ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. æ£€æŸ¥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   1.1 æ£€æŸ¥æ‰€æœ‰nodeèŠ‚ç‚¹çŠ¶æ€ä¸ºready</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. ç»„ä»¶éƒ¨ç½²</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.1 ç»™nodeèŠ‚ç‚¹æ‰“ä¸Šç›¸åº”çš„labelã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.2 ä½¿ç”¨deploymentéƒ¨ç½²yurt-controller-managerã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.3 ä½¿ç”¨deploymentéƒ¨ç½²yurt-tunnel-serverã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.4 ä½¿ç”¨daemonsetéƒ¨ç½²yurt-tunnel-agentï¼Œéƒ¨ç½²åœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸Šã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.5 ä½¿ç”¨deploymentéƒ¨ç½²yurt-app-managerã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. k8sç»„ä»¶ä¿®æ”¹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  3.1 ä¿®æ”¹kube-controller-manager.yamlï¼Œç”¨æ¥disable nodelifecycle controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. èŠ‚ç‚¹è½¬æ¢</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   4.1 å†™å…¥yurthub.yamlåˆ°/etc/kubernetes/manifestsï¼Œå¯åŠ¨é™æ€pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   4.2 ä¿®æ”¹kubeleté…ç½®ï¼Œä½¿å¾—kubeletè®¿é—®yurthubè€Œä¸æ˜¯ç›´è¿apiServer</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§1ã€2å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ï¼Œåªæ˜¯å¸¸è§„çš„æœåŠ¡éƒ¨ç½²</p><p>3ï¼Œåˆ™æ˜¯å¯¹åŸæœ‰k8sç³»ç»Ÿç»„ä»¶çš„æ“ä½œï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„</p><p>4-èŠ‚ç‚¹è½¬æ¢çœ‹ç€ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œå´å¯¹è¾¹ç¼˜è‡³å…³é‡è¦ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="disable-nodelifecycle-controller-åšäº†ä»€ä¹ˆ">disable nodelifecycle controller åšäº†ä»€ä¹ˆï¼Ÿ<a aria-hidden="true" class="hash-link" href="#disable-nodelifecycle-controller-åšäº†ä»€ä¹ˆ" title="Direct link to heading">â€‹</a></h3><p>å·¥ä½œå†…å®¹ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. æŸ¥è¯¢æ§åˆ¶é¢èŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. åˆ›å»ºjobï¼Œé€šè¿‡` nodeName: {{.nodeName}}` ç¡®ä¿jobçš„podè°ƒåº¦åˆ°å¯¹åº”nodeä¸Šæ‰§è¡Œ(é€šè¿‡nsenterçš„æ–¹å¼æ‰§è¡Œï¼Œä¿®æ”¹å®¿ä¸»æœºä¸Šæ–‡ä»¶)ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. sed -i &#x27;s/--controllers=/--controllers=-nodelifecycle,/g&#x27; /etc/kubernetes/manifests/kube-controller-manager.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æŸ¥çœ‹kube-controller-manager.yaml</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">containers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- command:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- kube-controller-manager</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --allocate-node-cidrs=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --controllers=-nodelifecycle,*,bootstrapsigner,tokencleaner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§ï¼Œä¸Šé¢çš„ä¸€ç³»åˆ—æ“ä½œæœ€ç»ˆå°±æ˜¯ä¿®æ”¹äº†kube-controller-managerçš„å¯åŠ¨å‘½ä»¤ã€‚</p><p>æŸ¥çœ‹kube-controller-managerå¯åŠ¨å‚æ•°è¯´æ˜ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--controllers ä»£è¡¨éœ€è¦å¼€å¯çš„controlleråˆ—è¡¨</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§ï¼Œsedå‘½ä»¤å°±æ˜¯å»æ‰äº†nodelifecycleè¿™ä¸ªcontrollerã€‚</p><p>é‚£ï¼Œnodelifecycle controlleræ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p><p>ç®€å•æ¥è¯´ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. ä¸æ–­ç›‘å¬ï¼Œkubeletä¸ŠæŠ¥ä¸Šæ¥çš„nodeä¿¡æ¯</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. å¦‚æœæŸä¸ªnodeçŠ¶æ€å¼‚å¸¸ï¼Œæˆ–è€…è¯´é•¿æ—¶é—´æ²¡æœ‰ä¸ŠæŠ¥ç­‰</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.1 é©±é€è¿™ä¸ªnodeèŠ‚ç‚¹æˆ–è€…å…¶ä»– ---&gt; å¯¼è‡´ä¸Šé¢çš„podè¢«é‡æ–°è°ƒåº¦</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§ï¼Œå¯¹äºå¤„äºå¼±ç½‘ç¯å¢ƒçš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå¾ˆå®¹æ˜“å°±å‘½ä¸­å¼‚å¸¸çŠ¶æ€ï¼Œå¯¼è‡´nodeè¢«é©±é€ï¼Œpodè¢«é‡æ–°è°ƒåº¦ã€‚</p><p>æ‰€ä»¥è¿™é‡ŒæŠŠå®ƒå»æ‰äº†ã€‚ä½¿ç”¨yurt-controller-manageræ¥ä»£æ›¿å®ƒã€‚</p><p>å³ä½¿èŠ‚ç‚¹å¿ƒè·³ä¸¢å¤±ï¼Œå¤„äºè‡ªæ²»æ¨¡å¼çš„èŠ‚ç‚¹ä¸­çš„podä¹Ÿä¸ä¼šä»APIServerä¸­é©±é€ã€‚</p><p>æ³¨ï¼šè¿™é‡Œè‡ªæ²»æ¨¡å¼çš„èŠ‚ç‚¹ï¼ŒæŒ‡çš„å°±æ˜¯è¾¹ç¼˜èŠ‚ç‚¹ã€‚æˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡åŠ annotationçš„æ–¹å¼æŠŠèŠ‚ç‚¹æ ‡è®°ä¸ºè‡ªæ²»èŠ‚ç‚¹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="èŠ‚ç‚¹è½¬æ¢æ˜¯æ€ä¹ˆå®ç°çš„äº‘ç«¯èŠ‚ç‚¹å’Œè¾¹ç¼˜èŠ‚ç‚¹æœ‰ä»€ä¹ˆå·®å¼‚">èŠ‚ç‚¹è½¬æ¢æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œäº‘ç«¯èŠ‚ç‚¹å’Œè¾¹ç¼˜èŠ‚ç‚¹æœ‰ä»€ä¹ˆå·®å¼‚?<a aria-hidden="true" class="hash-link" href="#èŠ‚ç‚¹è½¬æ¢æ˜¯æ€ä¹ˆå®ç°çš„äº‘ç«¯èŠ‚ç‚¹å’Œè¾¹ç¼˜èŠ‚ç‚¹æœ‰ä»€ä¹ˆå·®å¼‚" title="Direct link to heading">â€‹</a></h3><p>åŒæ ·ï¼Œæ˜¯é€šè¿‡è·‘jobçš„æ–¹å¼ï¼Œåœ¨ç›®æ ‡å®¿ä¸»æœºä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œç›¸å…³æ“ä½œã€‚</p><p>ä¸è¿‡ï¼Œç›¸æ¯”äºæš´åŠ›ä½¿ç”¨nsenterï¼Œè¿™é‡Œç”¨äº†æ›´åŠ ä¼˜é›…çš„æ–¹å¼ã€‚é€šè¿‡å°†å®¿ä¸»æœºæ ¹è·¯å¾„ volumeæŒ‚è½½åˆ°å®¹å™¨é‡Œçš„æ–¹å¼ã€‚</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="kubeletçš„ä¿®æ”¹">kubeletçš„ä¿®æ”¹<a aria-hidden="true" class="hash-link" href="#kubeletçš„ä¿®æ”¹" title="Direct link to heading">â€‹</a></h5><p>åœ¨æ–‡ä»¶/var/lib/kubelet/kubeadm-flags.env ä¸­ä¸ºKUBELET_KUBEADM_ARGSæ·»åŠ é…ç½®ï¼š</p><p><code>--kubeconfig=/var/lib/openyurt/kubelet.conf --bootstrap-kubeconfig=</code></p><p>ä½œç”¨ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. å‚æ•°ï¼š--kubeconfig ï¼Œ ç»™kubeletæŒ‡å®šäº†è®¿é—®apiServerçš„é…ç½®æ–‡ä»¶ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. å½“--kubeconfig æ–‡ä»¶å­˜åœ¨ï¼Œ--bootstrap-kubeconfigä¸ºç©ºæ—¶ï¼Œ</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   kubeletå¯åŠ¨å°±ä¸éœ€è¦é€šè¿‡bootstrap-tokenç½®æ¢æ–‡ä»¶è¯ä¹¦ç­‰è¿‡ç¨‹ï¼Œç›´æ¥è¯»å–kubeconfigæ–‡ä»¶è®¿é—®apiServerã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. ç”±äºKUBELET_KUBEADM_ARGS æ˜¯kubeletå¯åŠ¨å‚æ•°çš„æœ€åä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å¯ä»¥èµ·åˆ°è¦†ç›–å‰é¢å‚æ•°çš„ä½œç”¨ã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å…¶ä¸­<code>/var/lib/openyurt/kubelet.conf</code>å†…å®¹å¦‚ä¸‹ï¼Œç›´æ¥å°†æµé‡æŒ‡å®šåˆ°yurthubï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server: http://127.0.0.1:10261</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name: default-cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cluster: default-cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace: default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user: default-auth</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name: default-context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">current-context: default-context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preferences: {}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_y2LR" id="yurthubçš„å¯åŠ¨ç»†èŠ‚">yurthubçš„å¯åŠ¨ç»†èŠ‚<a aria-hidden="true" class="hash-link" href="#yurthubçš„å¯åŠ¨ç»†èŠ‚" title="Direct link to heading">â€‹</a></h5><p>yurthubå®¹å™¨å¯åŠ¨å‚æ•°å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">command:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- yurthub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --v=2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --server-addr=__kubernetes_service_addr__</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --node-name=$(NODE_NAME)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --join-token=__join_token__</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --working-mode=__working_mode__</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é€šè¿‡å‚æ•°æˆ‘ä»¬å¯çœ‹å‡ºï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. server-addr æŒ‡å®šäº†äº‘ç«¯apiServeråœ°å€ã€‚æ³¨æ„è¿™é‡Œçš„åœ°å€ä¸€å®šæ˜¯å…¬ç½‘å¯è®¿é—®åœ°å€ï¼Œå¦åˆ™å¼‚æ„ç½‘ç»œä¸‹ä¼šæœ‰é—®é¢˜ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. join-token å°±æ˜¯åŠ å…¥èŠ‚ç‚¹çš„tokenï¼Œå¯ä½¿ç”¨`kubeadm token create`æ¥åˆ›å»ºã€‚k8sæä¾›æœºåˆ¶ï¼Œé€šè¿‡tokenç½®æ¢å‡ºæ­£å¸¸è®¿é—®çš„kubeconfæ–‡ä»¶ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. working-modeï¼š cloud/edgeã€‚è¿™å°±æ˜¯è¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘ç«¯èŠ‚ç‚¹çš„å·®å¼‚ã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æˆ‘ä»¬éƒ½çŸ¥é“yurthubå¯ä»¥ç”¨æ¥åšç¼“å­˜ï¼Œæ˜¯è§£å†³è¾¹ç¼˜è‡ªæ²»çš„é‡è¦ç¯èŠ‚ã€‚é‚£ä¹ˆäº‘ç«¯ä¸ºä»€ä¹ˆä¹Ÿéœ€è¦éƒ¨ç½²ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦åŒºåˆ†edgeæˆ–è€…cloudå·¥ä½œæ¨¡å¼ï¼Ÿ</p><p>ç®€å•æŸ¥çœ‹yurthubæºä»£ç  cmd/yurthub/app/start.go:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI golang"><pre tabindex="0" class="prism-code language-golang codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if cfg.WorkingMode == util.WorkingModeEdge {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cacheMgr, err = cachemanager.NewCacheManager(cfg.StorageWrapper, cfg.SerializerManager, cfg.RESTMapperManager, cfg.SharedFactory)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    klog.Infof(&quot;%d. disable cache manager for node %s because it is a cloud node&quot;, trace, cfg.NodeName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if cfg.WorkingMode == util.WorkingModeEdge {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gcMgr, err := gc.NewGCManager(cfg, restConfigMgr, stopCh)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    klog.Infof(&quot;%d. disable gc manager for node %s because it is a cloud node&quot;, trace, cfg.NodeName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§ï¼Œäº‘ç«¯yurthubï¼Œå°‘åšäº† cacheã€GCçš„å·¥ä½œã€‚</p><p>æŸ¥çœ‹<a href="https://github.com/openyurtio/openyurt/issues/450" target="_blank" rel="noopener noreferrer">issue</a> å¯äº†è§£ï¼šäº‘ç«¯ä¹Ÿå¯ä»¥åˆ©ç”¨yurthubæä¾›çš„data-filteringèƒ½åŠ›æ¥æ§åˆ¶serviceçš„æµé‡</p><p>å½“ç„¶ï¼Œäº‘ç«¯ä¹Ÿä¸éœ€è¦åšcacheç­‰å·¥ä½œã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å‘½ä»¤è¡Œå‚æ•°">å‘½ä»¤è¡Œå‚æ•°<a aria-hidden="true" class="hash-link" href="#å‘½ä»¤è¡Œå‚æ•°" title="Direct link to heading">â€‹</a></h3><p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ä¸ªå‚æ•°æ¯”è¾ƒé‡è¦ï¼š</p><p>--cloud-nodes ç”¨äºæ ‡è¯†å“ªäº›æ˜¯äº‘ç«¯èŠ‚ç‚¹ï¼Œå¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·åˆ†éš”ï¼šnode1,node2</p><p>--deploy-yurttunnel æ ‡è®°æ˜¯å¦è¦éƒ¨ç½²yurttunnel</p><p>--kubeadm-conf-path æ ‡è®°èŠ‚ç‚¹æœºå™¨ä¸Škubeadmé…ç½®æ–‡ä»¶è·¯å¾„ã€‚é»˜è®¤ï¼š/etc/systemd/system/kubelet.service.d/10-kubeadm.conf</p><p>æ›´å¤šå‚æ•°ï¼Œå¯ä½¿ç”¨ yurtctl convert --help æ¥æŸ¥çœ‹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ€»ç»“">æ€»ç»“<a aria-hidden="true" class="hash-link" href="#æ€»ç»“" title="Direct link to heading">â€‹</a></h3><p>ç®€å•æ¥è¯´ï¼Œconvertæ ¸å¿ƒåšäº†å‡ ä¸ªäº‹æƒ…ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. disable k8s çš„nodelifecontrollerï¼Œç”¨è‡ªå·±çš„yurtcontrollermanageræ¥æ›¿æ¢å®ƒçš„èŒè´£ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. å®‰è£…è‡ªå·±çš„å„ç±»ç»„ä»¶ï¼Œdeploymentã€damenonset ç­‰æ¨¡å¼éƒ¨ç½²ã€‚ï¼ˆè¿™ç±»èµ„æºéƒ¨ç½²æ— éœ€ä»»ä½•æ‹…å¿ƒï¼Œå› ä¸ºæä¸åé›†ç¾¤ï¼Œä¹Ÿä¸å¤ªä¼šå‡ºç°é—®é¢˜ã€‚ï¼‰</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. è¾¹ç¼˜èŠ‚ç‚¹ï¼šå¯åŠ¨yurthubé™æ€pod;å°†kubeletæµé‡è½¬å‘åˆ°yurthubã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯è§ï¼Œconvertçš„äº‹æƒ…è¿˜æ˜¯æ¯”è¾ƒå¯æ§çš„ã€‚æ‰§è¡Œyurtctl convert ä¹Ÿä¸ç”¨å¤ªæ‹…å¿ƒã€‚</p><p>å½“ç„¶ï¼Œæœ€åçš„æ‹…å¿ƒä¹Ÿåº”è¯¥ç”± yurtctl revert æ¥å½»åº•æ¶ˆé™¤ï¼</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="yurtctl-revert-åˆå¹²äº†äº›ä»€ä¹ˆ">yurtctl revert åˆå¹²äº†äº›ä»€ä¹ˆï¼Ÿ<a aria-hidden="true" class="hash-link" href="#yurtctl-revert-åˆå¹²äº†äº›ä»€ä¹ˆ" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ ¸å¿ƒæµç¨‹-1">æ ¸å¿ƒæµç¨‹<a aria-hidden="true" class="hash-link" href="#æ ¸å¿ƒæµç¨‹-1" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. æ£€æŸ¥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  1.1 ç¡®ä¿æ‰€æœ‰nodeéƒ½å·²ç»ready</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. åˆ é™¤è‡ªèº«éƒ¨ç½²ç»„ä»¶</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.1 åˆ é™¤ yurt-controller-manager deploymentä»¥åŠç›¸å…³èµ„æº </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.2 åˆ é™¤yurt-tunnel-agentä»¥åŠç›¸å…³èµ„æº</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.2 åˆ é™¤yurt-tunnel-serverä»¥åŠç›¸å…³èµ„æº  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2.3 åˆ é™¤yurt-app-managerä»¥åŠç›¸å…³èµ„æº</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. k8sç»„ä»¶ä¿®æ”¹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  3.1 å¼€å¯nodelifecontroller, è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æŠŠä¿®æ”¹çš„å‘½ä»¤é€šè¿‡sedå‘½ä»¤æ”¹å›æ¥ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. äº‘ç«¯ã€è¾¹ç¼˜èŠ‚ç‚¹è½¬æ¢ä¸ºåŸç”ŸèŠ‚ç‚¹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  4.1 ä¿®æ”¹kubeleté…ç½®ï¼Œç›´è¿apiServer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  4.2 åˆ é™¤yurthubç›¸å…³é…ç½®ã€ç›®å½•</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ•´ä¸ªrevertçš„è¿‡ç¨‹å°±æ˜¯convertçš„åå‘æ“ä½œï¼Œè¿˜æ¯”è¾ƒå¥½ç†è§£ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ã€‚å¦‚æœconvertå¤±è´¥ï¼Œæ¯”å¦‚jobæ‰§è¡Œè¶…æ—¶æˆ–è€…å¤±è´¥ã€‚jobæ˜¯ä¸ä¼šè¢«åˆ é™¤çš„ã€‚</p><p>å³ä½¿yurtctl revert ä¹Ÿä¸ä¼šåˆ é™¤ã€‚ç›®çš„æ˜¯ä¸ºäº†ä¿ç•™ç°åœºæ–¹ä¾¿å®šä½é—®é¢˜ã€‚</p><p>å¦‚æœéœ€è¦é‡æ–°æ‰§è¡Œyurtctl convertï¼Œ éœ€è¦æ‰‹åŠ¨åˆ é™¤jobã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get job -n kube-system -A |grep convert</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete job -n kube-system &lt; job-name&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="æ€»ç»“-1">æ€»ç»“<a aria-hidden="true" class="hash-link" href="#æ€»ç»“-1" title="Direct link to heading">â€‹</a></h2><p>yurtctl convert/revert å‘½ä»¤æ˜¯æœ€å¿«æ·ä½“éªŒopenYurtåŠŸèƒ½çš„æ–¹æ³•ä¹‹ä¸€ã€‚</p><p>åœ¨äº†è§£äº†è¿™ä¸¤ä¸ªå‘½ä»¤çš„å®ç°åŸç†ï¼Œä¹Ÿå°±å¯¹openYurtçš„æŠ€æœ¯æ–¹æ¡ˆäº†è§£å¤§åŠäº†ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ä¹Ÿä¸æ‹…å¿ƒäº†ï¼Œso easyï¼</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/openyurt">openyurt</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/openyurtio/openyurt.io/tree/master/blog/blog/2021-12-03-Conversion-between-kubernetes-and-openyurt.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/How-to-use-service-topology"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Use service topology to realize topology-aware traffic routing<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#yurtctl-convert-åˆ°åº•åšäº†äº›ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">yurtctl convert åˆ°åº•åšäº†äº›ä»€ä¹ˆï¼Ÿ</a><ul><li><a href="#æ ¸å¿ƒæµç¨‹" class="table-of-contents__link toc-highlight">æ ¸å¿ƒæµç¨‹</a></li><li><a href="#disable-nodelifecycle-controller-åšäº†ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">disable nodelifecycle controller åšäº†ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#èŠ‚ç‚¹è½¬æ¢æ˜¯æ€ä¹ˆå®ç°çš„äº‘ç«¯èŠ‚ç‚¹å’Œè¾¹ç¼˜èŠ‚ç‚¹æœ‰ä»€ä¹ˆå·®å¼‚" class="table-of-contents__link toc-highlight">èŠ‚ç‚¹è½¬æ¢æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œäº‘ç«¯èŠ‚ç‚¹å’Œè¾¹ç¼˜èŠ‚ç‚¹æœ‰ä»€ä¹ˆå·®å¼‚?</a></li><li><a href="#å‘½ä»¤è¡Œå‚æ•°" class="table-of-contents__link toc-highlight">å‘½ä»¤è¡Œå‚æ•°</a></li><li><a href="#æ€»ç»“" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></li><li><a href="#yurtctl-revert-åˆå¹²äº†äº›ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">yurtctl revert åˆå¹²äº†äº›ä»€ä¹ˆï¼Ÿ</a><ul><li><a href="#æ ¸å¿ƒæµç¨‹-1" class="table-of-contents__link toc-highlight">æ ¸å¿ƒæµç¨‹</a></li></ul></li><li><a href="#æ€»ç»“-1" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/installation/summary">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/openyurt/shared_invite/zt-rc5ecz4h-sEWU1vYx5gzc3_zx3En0jg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CNCF Slack ( #openyurt channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">DingTalk (31993519)</a></li><li class="footer__item"><a href="https://shimo.im/docs/rGK3cXYWYkPrvWp8" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openyurtio/openyurt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/openyurtio/community/blob/main/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Community Membership<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://47.243.253.79/login" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OpenYurt Experience Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Copyright Â© 2022 The OpenYurt Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
<script src="/assets/js/runtime~main.6e7eb5b3.js"></script>
<script src="/assets/js/main.a8318200.js"></script>
</body>
</html>